import{r as c,p as _,s as R,y as O,aA as z,B as L,e as j,H as M,b as p,j as b,T as H,t as U,M as B,I as A,aE as G,Q as $,O as P,aF as V,S as q,aG as X,z as Q,X as Y}from"./index-f79488dc.js";import{I as D,B as w}from"./index-4ff138c1.js";import{S as K}from"./Skeleton-ec08d90e.js";import{u as W,T as J}from"./Table-075808dc.js";import{D as Z,a as ee,P as te}from"./DeleteOutlined-434dd253.js";import{u as I}from"./useMutation-2306ab6e.js";import"./index-27683083.js";import"./Overflow-8b08e3b8.js";import"./addEventListener-d43927e0.js";import"./useFlexGapSupport-8b11537b.js";import"./index-0248928d.js";import"./collapse-97de76d4.js";const ne=n=>{const{value:t,formatter:s,precision:a,decimalSeparator:o,groupSeparator:u="",prefixCls:r}=n;let m;if(typeof s=="function")m=s(t);else{const i=String(t),g=i.match(/^(-?)(\d*)(\.(\d+))?$/);if(!g||i==="-")m=i;else{const y=g[1];let d=g[2]||"0",f=g[4]||"";d=d.replace(/\B(?=(\d{3})+(?!\d))/g,u),typeof a=="number"&&(f=f.padEnd(a,"0").slice(0,a>0?a:0)),f&&(f=`${o}${f}`),m=[c.createElement("span",{key:"int",className:`${r}-content-value-int`},y,d),f&&c.createElement("span",{key:"decimal",className:`${r}-content-value-decimal`},f)]}}return c.createElement("span",{className:`${r}-content-value`},m)},ae=ne,oe=n=>{const{componentCls:t,marginXXS:s,padding:a,colorTextDescription:o,statisticTitleFontSize:u,colorTextHeading:r,statisticContentFontSize:m,statisticFontFamily:i}=n;return{[`${t}`]:Object.assign(Object.assign({},O(n)),{[`${t}-title`]:{marginBottom:s,color:o,fontSize:u},[`${t}-skeleton`]:{paddingTop:a},[`${t}-content`]:{color:r,fontSize:m,fontFamily:i,[`${t}-content-value`]:{display:"inline-block",direction:"ltr"},[`${t}-content-prefix, ${t}-content-suffix`]:{display:"inline-block"},[`${t}-content-prefix`]:{marginInlineEnd:s},[`${t}-content-suffix`]:{marginInlineStart:s}}})}},se=_("Statistic",n=>{const{fontSizeHeading3:t,fontSize:s,fontFamily:a}=n,o=R(n,{statisticTitleFontSize:s,statisticContentFontSize:t,statisticFontFamily:a});return[oe(o)]}),ie=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]];function le(n,t){let s=n;const a=/\[[^\]]*]/g,o=(t.match(a)||[]).map(i=>i.slice(1,-1)),u=t.replace(a,"[]"),r=ie.reduce((i,g)=>{let[y,d]=g;if(i.includes(y)){const f=Math.floor(s/d);return s-=f*d,i.replace(new RegExp(`${y}+`,"g"),x=>{const S=x.length;return f.toString().padStart(S,"0")})}return i},u);let m=0;return r.replace(a,()=>{const i=o[m];return m+=1,i})}function re(n,t){const{format:s=""}=t,a=new Date(n).getTime(),o=Date.now(),u=Math.max(a-o,0);return le(u,s)}const ce=1e3/30;function de(n){return new Date(n).getTime()}const ue=n=>{const{value:t,format:s="HH:mm:ss",onChange:a,onFinish:o}=n,u=W(),r=c.useRef(null),m=()=>{o==null||o(),r.current&&(clearInterval(r.current),r.current=null)},i=()=>{const d=de(t);d>=Date.now()&&(r.current=setInterval(()=>{u(),a==null||a(d-Date.now()),d<Date.now()&&m()},ce))};c.useEffect(()=>(i(),()=>{r.current&&(clearInterval(r.current),r.current=null)}),[t]);const g=(d,f)=>re(d,Object.assign(Object.assign({},f),{format:s})),y=d=>z(d,{title:void 0});return c.createElement(F,Object.assign({},n,{valueRender:y,formatter:g}))},me=c.memo(ue),N=n=>{const{prefixCls:t,className:s,rootClassName:a,style:o,valueStyle:u,value:r=0,title:m,valueRender:i,prefix:g,suffix:y,loading:d=!1,onMouseEnter:f,onMouseLeave:x,decimalSeparator:S=".",groupSeparator:T=","}=n,{getPrefixCls:C,direction:E}=c.useContext(L),e=C("statistic",t),[l,h]=se(e),v=c.createElement(ae,Object.assign({decimalSeparator:S,groupSeparator:T,prefixCls:e},n,{value:r})),k=j(e,{[`${e}-rtl`]:E==="rtl"},s,a,h);return l(c.createElement("div",{className:k,style:o,onMouseEnter:f,onMouseLeave:x},m&&c.createElement("div",{className:`${e}-title`},m),c.createElement(K,{paragraph:!1,loading:d,className:`${e}-skeleton`},c.createElement("div",{style:u,className:`${e}-content`},g&&c.createElement("span",{className:`${e}-content-prefix`},g),i?i(v):v,y&&c.createElement("span",{className:`${e}-content-suffix`},y)))))};N.Countdown=me;const F=N;function we(){const[n,t]=c.useState([]),[s,a]=c.useState(""),[o,u]=c.useState(-1),[r,m]=c.useState(-1),[i,g]=c.useState("Tag updated"),{loading:y}=M(G,{onCompleted:e=>{t(e.getTags)},onError:({graphQLErrors:e})=>{A(e,"tags")}}),[d,{loading:f}]=I(V,{onCompleted:e=>{e.updateTag&&(u(-1),$.success("Tag Updated"))},onError:({graphQLErrors:e})=>{P(e,"the tag")}}),[x,{loading:S}]=I(X,{onCompleted:e=>{if(e){$.success("Tag Deleted");const l=[...n];l.splice(r,1),t(l),m(-1)}},onError:({graphQLErrors:e})=>{q(e,"the tag")}});function T(e){delete e.__typename,!(!e.label||!e.label.length||e.label.length==0)&&d({variables:{_id:e._id,input:{label:e.label}}})}function C(e,l){return console.log(e,l,o),l===o?p(D,{defaultValue:e.label,onChange:h=>{const v=[...n];v.splice(o,1,{...e,label:h.target.value}),t(v)},onPressEnter:()=>{T(e)}},e._id):p(B,{color:U.colors.primary,style:{width:"fit-content",height:"fit-content"},children:e.label},e._id)}function E(e,l){return b("div",{sx:{display:"flex",alignItems:"center"},children:[p(te,{title:"Delete tag",description:"Are you sure you want to delete this tag?",okText:"Yes",cancelText:"No",onConfirm:()=>{m(l),x({variables:{_id:e._id}})},children:p(w,{type:"primary",danger:!0,icon:p(ee,{}),style:{marginRight:"1rem"},loading:l===r&&S})}),l===o?p(w,{type:"primary",icon:p(Q,{}),onClick:()=>{const h=[...n];h[l].label=i,t(h),u(null)},loading:f}):p(w,{type:"primary",icon:p(Y,{}),onClick:()=>{if(g(e.label),u(l),o>-1&&o!=l){const h=[...n];h[o].label=i,t(h),u(l)}else u(l),g(e.label)}})]},l)}return p("div",{sx:{height:"100%",width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},children:p("div",{sx:{height:"100%",width:"100%",maxWidth:"600px",display:"flex",flexDirection:"column",alignItems:"center"},children:b("div",{sx:{height:"100%",width:"100%",display:"flex",flexDirection:"column"},children:[b("div",{sx:{height:"fit-content",width:"100%",display:"grid",gridTemplateColumns:"1fr auto",alignItems:"flex-end"},children:[p("div",{sx:{height:"fit-content",width:"100%",display:"flex"},children:p(D,{allowClear:!0,style:{width:"100%"},placeholder:"Ex. landspeeder",onChange:e=>{e.target.value.length===0&&a(null),a(e.target.value)}})}),p(F,{title:p(H.Text,{children:"Results"}),value:n.length,style:{marginLeft:"1rem",width:"fit-content"}})]}),p(Z,{style:{marginTop:"1rem",marginBottom:"1rem"}}),p(J,{columns:[{title:"Tag",dataIndex:"label",key:"_id",render:(e,l,h)=>C(l,h)},{title:"Actions",key:"actions",render:(e,l,h)=>E(l,h),width:110}],dataSource:n.filter(e=>!s||s.length==0||e.label.toLowerCase().includes(s.toLowerCase())),rowKey:"_id",pagination:!1,loading:y})]})})})}export{we as default};
