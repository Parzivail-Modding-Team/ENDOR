import{r as n,a1 as m,a2 as j,a3 as O,a4 as r}from"./index-f79488dc.js";var q=["refetch","reobserve","fetchMore","updateQuery","startPolling","subscribeToMore"];function F(P,c){var i,e=n.useRef(),f=n.useRef(),h=n.useRef(),u=e.current?m(c,e.current):c,y=(i=u==null?void 0:u.query)!==null&&i!==void 0?i:P;f.current=u,h.current=y;var s=j(O(c&&c.client),y),g=s.useQuery(r(r({},u),{skip:!e.current})),p=g.observable.options.initialFetchPolicy||s.getDefaultFetchPolicy(),l=Object.assign(g,{called:!!e.current}),d=n.useMemo(function(){for(var t={},v=function(b){var Q=l[b];t[b]=function(){return e.current||(e.current=Object.create(null),s.forceUpdate()),Q.apply(this,arguments)}},a=0,o=q;a<o.length;a++){var M=o[a];v(M)}return t},[]);Object.assign(l,d);var R=n.useCallback(function(t){e.current=t?r(r({},t),{fetchPolicy:t.fetchPolicy||p}):{fetchPolicy:p};var v=m(f.current,r({query:h.current},e.current)),a=s.executeQuery(r(r({},v),{skip:!1})).then(function(o){return Object.assign(o,d)});return a.catch(function(){}),a},[]);return[R,l]}export{F as u};
